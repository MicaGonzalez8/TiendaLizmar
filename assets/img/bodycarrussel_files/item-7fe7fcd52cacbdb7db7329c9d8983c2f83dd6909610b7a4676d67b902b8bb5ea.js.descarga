function reload_selects_with_disabled(){$("select#variant_dropdown option").each(function(index,el){var str=$(this).text();str.indexOf("sin")>0&&$(this).attr("disabled","disabled")}),$("#select2-variant_dropdown-container").click(function(e){$(".select2-results__option").each(function(index,el){var str=$(this).text();str.indexOf("sin")>0&&$(this).addClass("muted")})})}function pinchZoom(imageElement){function distance(event){return Math.hypot(event.touches[0].pageX-event.touches[1].pageX,event.touches[0].pageY-event.touches[1].pageY)}var imageElementScale=1,start={};imageElement.addEventListener("touchstart",function(event){2===event.touches.length&&(event.preventDefault(),start.x=(event.touches[0].pageX+event.touches[1].pageX)/2,start.y=(event.touches[0].pageY+event.touches[1].pageY)/2,start.distance=distance(event))}),imageElement.addEventListener("touchmove",function(event){if(2===event.touches.length){event.preventDefault();var scale;if(event.scale)scale=event.scale;else{var deltaDistance=distance(event);scale=deltaDistance/start.distance}imageElementScale=Math.min(Math.max(1,scale),4);var deltaX=2*((event.touches[0].pageX+event.touches[1].pageX)/2-start.x),deltaY=2*((event.touches[0].pageY+event.touches[1].pageY)/2-start.y),transform="translate3d("+deltaX+"px,"+deltaY+"px, 0) scale( "+imageElementScale+" )";imageElement.style.transform=transform,imageElement.style.WebkitTransform=transform,imageElement.style.zIndex="9999"}}),imageElement.addEventListener("touchend",function(event){imageElement.style.transform="",imageElement.style.WebkitTransform="",imageElement.style.zIndex=""})}!function($){"use strict";function hasScrollbar($elem,axis){var $body,elemProps,bodyProps,innerWidth,innerHeight,scrollWidth,scrollHeight,query={target:{}},result={},context={},elem=$elem[0];if($elem=$elem.eq(0),axis||(axis="both"),query.getBoth="both"===axis,query.getHorizontal="horizontal"===axis||query.getBoth,query.getVertical="vertical"===axis||query.getBoth,"horizontal"!==axis&&"vertical"!==axis&&"both"!==axis)throw new Error("Invalid parameter value: axis = "+axis);return $elem.length?(query.target.isWindow=$.isWindow(elem),query.target.isWindow?context.document=elem.document:9===elem.nodeType?(context.document=elem,query.target.isWindow=!0):elem===elem.ownerDocument.documentElement?(context.document=elem.ownerDocument,query.target.isWindow=!0):1===elem.nodeType&&"iframe"===elem.tagName.toLowerCase()?(context.document=elem.contentDocument||elem.contentWindow.document,query.target.isWindow=!0):elem===elem.ownerDocument.body&&(context.document=elem.ownerDocument,query.target.isBody=!0),(query.target.isWindow||query.target.isBody)&&(context.window=context.document.defaultView||context.document.parentWindow,context.$document=$(context.document),context.documentElement=context.document.documentElement,context.body=context.document.body,elem=$elem=void 0),query.target.isWindow?result=_windowHasScrollbar(query,context):query.target.isBody?(bodyProps=_getViewportOverflows(query,context).body,$body=$(context.body),query.getHorizontal&&(result.horizontal=bodyProps.overflowScrollX||bodyProps.overflowAutoX&&context.body.clientHeight<$body.height()),query.getVertical&&(result.vertical=bodyProps.overflowScrollY||bodyProps.overflowAutoY&&context.body.clientWidth<$body.width())):(elemProps=getCss(elem,["overflow","overflowX","overflowY"],{toLowerCase:!0}),elemProps=getAppliedOverflows(elemProps,!0),scrollWidth=elem.scrollWidth,scrollHeight=elem.scrollHeight,result.horizontal=scrollWidth>0&&(elemProps.overflowScrollX||elemProps.overflowAutoX&&(innerWidth=$elem.innerWidth())<scrollWidth),result.vertical=scrollHeight>0&&(elemProps.overflowScrollY||elemProps.overflowAutoY&&(innerHeight=$elem.innerHeight())<scrollHeight),result.vertical=result.vertical||result.horizontal&&elemProps.overflowAutoY&&(void 0!==innerHeight?innerHeight:$elem.innerHeight())-$.scrollbarWidth()<scrollHeight,result.horizontal=result.horizontal||result.vertical&&elemProps.overflowAutoX&&(void 0!==innerWidth?innerWidth:$elem.innerWidth())-$.scrollbarWidth()<scrollWidth),query.getBoth?result:query.getHorizontal?result.horizontal:result.vertical):void 0}function effectiveScrollbarWith($elem,axis){var queryHorizontal,queryVertical,queryBoth,elemHasScrollbar,horizontal,vertical,globalWidth=$.scrollbarWidth();if(axis||(axis="both"),queryBoth="both"===axis,queryHorizontal="horizontal"===axis||queryBoth,queryVertical="vertical"===axis||queryBoth,"horizontal"!==axis&&"vertical"!==axis&&"both"!==axis)throw new Error("Invalid parameter value: axis = "+axis);return $elem.length?0===globalWidth?queryBoth?{horizontal:0,vertical:0}:0:(elemHasScrollbar=queryBoth?hasScrollbar($elem):queryHorizontal?{horizontal:hasScrollbar($elem,"horizontal")}:{vertical:hasScrollbar($elem,"vertical")},queryHorizontal&&(horizontal=elemHasScrollbar.horizontal?globalWidth:0),queryVertical&&(vertical=elemHasScrollbar.vertical?globalWidth:0),queryBoth?{horizontal:horizontal,vertical:vertical}:queryHorizontal?horizontal:vertical):void 0}function ownerWindow($elem){var elem=$elem[0],ownerDocument=elem&&(9===elem.nodeType?elem:elem.ownerDocument);return ownerDocument&&(ownerDocument.defaultView||ownerDocument.parentWindow)||$.isWindow(elem)&&elem||void 0}function inView($elems,container,opts){var config,elemsInView=[];return $elems.length?(config=_prepareConfig($elems,container,opts),checkHierarchy($elems[0],config.container),$elems.each(function(){_isInView(this,config)&&elemsInView.push(this)}),$(elemsInView)):$()}function isInView($elem,container,opts){var config,elem=$elem[0];return $elem.length?(config=_prepareConfig($elem,container,opts),checkHierarchy(elem,config.container),_isInView(elem,config)):!1}function _prepareConfig($elem,container,opts){var $container,direction,config={};return opts||(opts={}),container||(container=ownerWindow($elem)),config.$container=$container=wrapContainer(container),config.container=container=$container[0],checkOptions(opts),direction=opts.direction||"both",config.useVertical="both"===direction||"vertical"===direction,config.useHorizontal="both"===direction||"horizontal"===direction,config.partially=opts.partially,config.excludeHidden=opts.excludeHidden,config.borderBox="content-box"!==opts.box,config.containerIsWindow=$.isWindow(container),void 0!==opts.tolerance?(config.toleranceType=isNumber(opts.tolerance)||"px"===opts.tolerance.slice(-3)?"add":"multiply",config.tolerance="add"===config.toleranceType?parseFloat(opts.tolerance):parseFloat(opts.tolerance)/100+1):(config.tolerance=0,config.toleranceType="add"),config.cache={},config}function _isInView(elem,config){var containerWidth,containerHeight,hTolerance,vTolerance,rect,container=config.container,$container=config.$container,cache=config.cache,elemInView=!0;if(elem===container)throw new Error("Invalid container: is the same as the element");return!config.excludeHidden||elem.offsetWidth>0&&elem.offsetHeight>0?(config.useHorizontal&&(containerWidth=getNetContainerWidth($container,config.containerIsWindow,cache)),config.useVertical&&(containerHeight=getNetContainerHeight($container,config.containerIsWindow,cache)),hTolerance=void 0!==cache.hTolerance?cache.hTolerance:cache.hTolerance="add"===config.toleranceType?config.tolerance:containerWidth*config.tolerance,vTolerance=void 0!==cache.vTolerance?cache.vTolerance:cache.vTolerance="add"===config.toleranceType?config.tolerance:containerHeight*config.tolerance,rect=config.borderBox?elem.getBoundingClientRect():getContentRect(elem),config.containerIsWindow||(rect=getRelativeRect(rect,$container,cache)),config.partially?(config.useVertical&&(elemInView=rect.top<containerHeight+vTolerance&&rect.bottom>-vTolerance),config.useHorizontal&&(elemInView=elemInView&&rect.left<containerWidth+hTolerance&&rect.right>-hTolerance)):(config.useVertical&&(elemInView=rect.top>=-vTolerance&&rect.top<containerHeight+vTolerance&&rect.bottom>-vTolerance&&rect.bottom<=containerHeight+vTolerance),config.useHorizontal&&(elemInView=elemInView&&rect.left>=-hTolerance&&rect.left<containerWidth+hTolerance&&rect.right>-hTolerance&&rect.right<=containerWidth+hTolerance)),elemInView):!1}function getRelativeRect(rect,$container,cache){var containerPaddingRectRoot;return cache&&cache.containerPaddingRectRoot?containerPaddingRectRoot=cache.containerPaddingRectRoot:(containerPaddingRectRoot=getPaddingRectRoot($container[0]),cache&&(cache.containerPaddingRectRoot=containerPaddingRectRoot)),{top:rect.top-containerPaddingRectRoot.top,bottom:rect.bottom-containerPaddingRectRoot.top,left:rect.left-containerPaddingRectRoot.left,right:rect.right-containerPaddingRectRoot.left}}function getContentRect(elem){var rect=elem.getBoundingClientRect(),props=getCss(elem,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft"],{toFloat:!0});return{top:rect.top+props.paddingTop+props.borderTopWidth,right:rect.right-(props.paddingRight+props.borderRightWidth),bottom:rect.bottom-(props.paddingBottom+props.borderBottomWidth),left:rect.left+props.paddingLeft+props.borderLeftWidth}}function getPaddingRectRoot(elem){var rect=elem.getBoundingClientRect(),props=getCss(elem,["borderTopWidth","borderLeftWidth"],{toFloat:!0});return{top:rect.top+props.borderTopWidth,left:rect.left+props.borderLeftWidth}}function _windowHasScrollbar(query,context){var windowInnerHeight,windowInnerWidth,windowProps,scrollbarWidth=$.scrollbarWidth(),result={},doneX=!query.getHorizontal,doneY=!query.getVertical;return query.getHorizontal&&scrollbarWidth>0&&(windowInnerHeight=context.window.innerHeight,windowInnerHeight>10&&(result.horizontal=windowInnerHeight>context.documentElement.clientHeight,doneX=!0)),query.getVertical&&scrollbarWidth>0&&(windowInnerWidth=context.window.innerWidth,windowInnerWidth>10&&(result.vertical=windowInnerWidth>context.documentElement.clientWidth,doneY=!0)),doneX&&doneY||(windowProps=_getViewportOverflows(query,context).window,!doneX&&windowProps.overflowScrollX&&(result.horizontal=doneX=!0),!doneY&&windowProps.overflowScrollY&&(result.vertical=doneY=!0),!doneX&&windowProps.overflowHiddenX&&(result.horizontal=!1,doneX=!0),!doneY&&windowProps.overflowHiddenY&&(result.vertical=!1,doneY=!0),doneX||(result.horizontal=context.documentElement.clientWidth<$.documentWidth(context.document)),doneY||(result.vertical=context.documentElement.clientHeight<$.documentHeight(context.document))),result}function _getViewportOverflows(query,context){var windowProps,bodyProps,overflowPropNames=["overflow"],bodyOverflowPropNames=["overflow"];return query.getHorizontal&&(overflowPropNames.push("overflowX"),bodyOverflowPropNames.push("overflowX")),query.getVertical&&(overflowPropNames.push("overflowY"),bodyOverflowPropNames.push("overflowY")),windowProps=getCss(context.documentElement,overflowPropNames,{toLowerCase:!0}),bodyProps=getCss(context.body,bodyOverflowPropNames,{toLowerCase:!0}),getAppliedViewportOverflows(windowProps,bodyProps)}function getAppliedOverflows(props,createBooleans){var status={};return status.overflowX=props.overflowX||props.overflow||"visible",status.overflowY=props.overflowY||props.overflow||"visible",createBooleans&&$.each(["Visible","Auto","Scroll","Hidden"],function(index,type){var lcType=type.toLowerCase();status["overflow"+type+"X"]=status.overflowX===lcType,status["overflow"+type+"Y"]=status.overflowY===lcType}),status}function getAppliedViewportOverflows(documentElementProps,bodyProps){var _window=getAppliedOverflows(documentElementProps,!1),body=getAppliedOverflows(bodyProps,!1),consolidated={window:{},body:{}};return"visible"===_window.overflowX?(consolidated.body.overflowX="visible",consolidated.window.overflowX=body.overflowX):(consolidated.body.overflowX=body.overflowX,consolidated.window.overflowX=_window.overflowX),"visible"===_window.overflowY?(consolidated.body.overflowY="visible",consolidated.window.overflowY=body.overflowY):(consolidated.body.overflowY=body.overflowY,consolidated.window.overflowY=_window.overflowY),"visible"===consolidated.window.overflowX&&(consolidated.window.overflowX="auto"),"visible"===consolidated.window.overflowY&&(consolidated.window.overflowY="auto"),isIOS()&&("hidden"===consolidated.window.overflowX&&(consolidated.window.overflowX="auto"),"hidden"===consolidated.window.overflowY&&(consolidated.window.overflowY="auto")),consolidated.window=getAppliedOverflows(consolidated.window,!0),consolidated.body=getAppliedOverflows(consolidated.body,!0),consolidated}function wrapContainer(container){var $container,isJquery=container instanceof $;if(!(isJquery||$.isWindow(container)||container.nodeType||isString(container)))throw new Error("Invalid container: not a window, node, jQuery object or selector string");if($container=isJquery?container:container===root?$root:$(container),!$container.length)throw new Error("Invalid container: empty jQuery object");if(container=$container[0],9===container.nodeType?$container=wrapContainer(container.defaultView||container.parentWindow):1===container.nodeType&&"iframe"===container.tagName.toLowerCase()&&($container=wrapContainer(container.contentWindow)),!$.isWindow($container[0])&&"visible"===$container.css("overflow"))throw new Error("Invalid container: is set to overflow:visible. Containers must have the ability to obscure some of their content, otherwise the in-view test is pointless. Containers must be set to overflow:scroll/auto/hide, or be a window (or document, or iframe, as proxies for a window)");return $container}function checkHierarchy(elem,container){var elemIsContained;if(1!==elem.nodeType)throw new Error("Invalid node: is not an element");if(elemIsContained=$.isWindow(container)?elem.ownerDocument&&container===(elem.ownerDocument.defaultView||elem.ownerDocument.parentWindow):9===container.nodeType?$.contains(container.documentElement,elem):$.contains(container,elem),!elemIsContained)throw new Error("Invalid container: is not an ancestor of the element")}function checkOptions(opts){var isNum,isNumWithUnit;if(opts.direction&&"vertical"!==opts.direction&&"horizontal"!==opts.direction&&"both"!==opts.direction)throw new Error('Invalid option value: direction = "'+opts.direction+'"');if(opts.box&&"border-box"!==opts.box&&"content-box"!==opts.box)throw new Error('Invalid option value: box = "'+opts.box+'"');if(void 0!==opts.tolerance&&(isNum=isNumber(opts.tolerance),isNumWithUnit=isString(opts.tolerance)&&/^[+-]?\d*\.?\d+(px|%)?$/.test(opts.tolerance),!isNum&&!isNumWithUnit))throw new Error('Invalid option value: tolerance = "'+opts.tolerance+'"')}function getNetContainerWidth($container,isWindow,cache){var width;return cache&&void 0!==cache.netContainerWidth?width=cache.netContainerWidth:(width=isWindow?getWindowDimension($container,"Width"):$container.innerWidth()-getContainerScrollbarWidths($container,cache).vertical,cache&&(cache.netContainerWidth=width)),width}function getNetContainerHeight($container,isWindow,cache){var height;return cache&&void 0!==cache.netContainerHeight?height=cache.netContainerHeight:(height=isWindow?getWindowDimension($container,"Height"):$container.innerHeight()-getContainerScrollbarWidths($container,cache).horizontal,cache&&(cache.netContainerHeight=height)),height}function getContainerScrollbarWidths($container,cache){var containerScrollbarWidths;return cache&&cache.containerScrollbarWidths?containerScrollbarWidths=cache.containerScrollbarWidths:(containerScrollbarWidths=effectiveScrollbarWith($container),cache&&(cache.containerScrollbarWidths=containerScrollbarWidths)),containerScrollbarWidths}function getWindowDimension($window,dimension){var doc=$window[0].document,property="client"+dimension;return"BackCompat"===doc.compatMode?doc.body[property]:doc.documentElement[property]}function getCss(elem,properties,opts){var i,length,name,props={},_window=elem.ownerDocument.defaultView||elem.ownerDocument.parentWindow,computedStyles=_useGetComputedStyle?_window.getComputedStyle(elem,null):elem.currentStyle;for(opts||(opts={}),$.isArray(properties)||(properties=[properties]),length=properties.length,i=0;length>i;i++)name=properties[i],props[name]=$.css(elem,name,!1,computedStyles),opts.toLowerCase&&props[name]&&props[name].toLowerCase&&(props[name]=props[name].toLowerCase()),opts.toFloat&&(props[name]=parseFloat(props[name]));return props}function isIOS(){return void 0===_isIOS&&(_isIOS=/iPad|iPhone|iPod/g.test(navigator.userAgent)),_isIOS}function isNumber(value){var isNumeric="number"==typeof value||value&&"object"==typeof value&&"[object Number]"===Object.prototype.toString.call(value)||!1;return isNumeric&&value===+value}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&"[object String]"===Object.prototype.toString.call(value)||!1}var _isIOS,_useGetComputedStyle=!!window.getComputedStyle,root=window,$root=$(window);$.fn.hasScrollbar=function(axis){return hasScrollbar(this,axis)},$.fn.scrollbarWidth=function(axis){return effectiveScrollbarWith(this,axis)},$.fn.ownerWindow=function(){return ownerWindow(this)},$.fn.inView=function(container,opts){return inView(this,container,opts)},$.fn.inViewport=function(opts){return inView(this,ownerWindow(this),opts)},$.fn.isInView=function(container,opts){return isInView(this,container,opts)},$.fn.isInViewport=function(opts){return isInView(this,ownerWindow(this),opts)},$.expr.match.inviewport=/^(?:inVieport)$/i,$.expr.setFilters.inviewport=$.expr.createPseudo(function(){return $.expr.createPseudo(function(elems,matches){var i,config,length=elems.length;if(length)for(config=_prepareConfig($(elems)),checkHierarchy(elems[0],config.container),i=0;length>i;i++)matches[i]=_isInView(elems[i],config)?elems[i]:void 0})})}("undefined"!=typeof jQuery?jQuery:$),sessionStorage.setItem("back","no"),function(){"use strict";function itemSlider(){this.ui={},this.ui.images=$(".js-item-show-images__item"),this.ui.imagesContainer=$(".js-item-show-images"),this.ui.navContainer=$("#js-item-show__nav"),this.ui.navContainerSmooth=$(".js-smooth-nav"),this.ui.navItem=$(".js-item-show__nav-item--pointer"),this.ui.prevBtn=$("#js-item-show__nav-prev"),this.ui.nextBtn=$("#js-item-show__nav-next"),this.ui.sizeInputs=$(".js-size-modal-aux"),this.ui.zoomBtn=$("#js-item-show__nav-zoom"),this.ui.zoomBtnIcon=$("#js-item-show__nav-zoom-icon"),this.ui.itemDetails=$("#js-item-show-details"),this.ui.recommendedItems=$("#js-item-show-recommendations"),this.ui.recommendedItemsSlider=$("#js-item-show-recommendations__slider"),this.ui.footerBanner=$(".item-show__footer-banner"),this.ui.detailsHeight=$(".js-item-show-images__height"),this.ui.detailsHeightCalc=$(".js-item-show__details-height"),this.ui.tabs=$(".js-tabs-description"),this.ui.zoomableImage=".js-zoom",this.ui.mobileHeader=$(".js-main-header__mobile"),this.ui.mobileSlider=".js-item-show__mobile-slider",this.ui.priceContainer=$(".js-item-price"),this.ui.itemForm=$("form.js-item-form"),this.ui.submitButton=this.ui.itemForm.find("input[type='submit']"),this.ui.resetSubmitButtonTime=2e3;var disableReset=this.ui.itemForm.data("disable-reset");this.ui.disableResetSubmitButton=void 0!==disableReset?disableReset:!1;var disableOnSubmit=this.ui.itemForm.data("disable-on-submit");this.ui.disableOnSubmit=void 0!==disableOnSubmit?disableOnSubmit:!0,this.ui.properties=".js-property",this.ui.propertyLabel=".js-property-label",this.ui.propertyInputs=".js-property-value",this.ui.groupedPropertyInputs=".js-grouped-property-value",this.ui.otherPropertiesContainer=".js-property-choices-container",this.ui.relvariantcontainer=".js-var-rec",this.ui.groupedPropertyvalue=".js-grouped-property-value";var fadeOnScroll=this.ui.itemForm.data("fade-on-scroll");this.ui.fadeOnScroll=void 0!==fadeOnScroll?fadeOnScroll:!0,this.currentIndex=0,this.ui.itemId=$("#item_id").val(),this.prevBtnEnabled=!0,this.nextBtnEnabled=!0,this.zoomEnabled=!1,configMobileSlider.apply(this),configDesktopSlider.apply(this),configSlider.apply(this),configZoom.apply(this),configHeightDetails.apply(this),this.ui.disableOnSubmit&&this.ui.itemForm.on("submit",function(event){return this.everyIsSelected()?void 0:(event.preventDefault(),this.checkProperties(),!1)}.bind(this));var self=this,groupedPropertyInputs=$(this.ui.groupedPropertyInputs);groupedPropertyInputs.on("change",self.changeImage.bind(self));var propertyLabels=$(this.ui.propertyLabel);propertyLabels.on("touchend",function(e){e.preventDefault(),$(this).prev(self.ui.propertyInputs).trigger("click")}),document.querySelectorAll(".item-show__mobile-slider img")&&document.querySelectorAll(".item-show__mobile-slider img").forEach(function(img){pinchZoom(img)})}itemSlider.prototype.reloadSlider=function(){this.ui.images=$(".js-item-show-images__item"),this.ui.imagesContainer=$(".js-item-show-images"),this.ui.navContainer=$("#js-item-show__nav"),this.ui.navItem=$(".js-item-show__nav-item--pointer"),this.ui.prevBtn=$("#js-item-show__nav-prev"),this.ui.nextBtn=$("#js-item-show__nav-next"),this.ui.zoomBtn=$("#js-item-show__nav-zoom"),this.ui.zoomBtnIcon=$("#js-item-show__nav-zoom-icon"),this.ui.itemDetails=$("#js-item-show-details"),this.ui.recommendedItems=$("#js-item-show-recommendations"),this.ui.recommendedItemsSlider=$("#js-item-show-recommendations__slider"),this.ui.footerBanner=$(".item-show__footer-banner"),this.ui.zoomableImage=".js-zoom",this.ui.mobileHeader=$(".js-main-header__mobile"),this.ui.mobileSlider=".js-item-show__mobile-slider",this.ui.priceContainer=$(".js-item-price"),this.ui.itemForm=$("form.js-item-form"),this.ui.submitButton=this.ui.itemForm.find("input[type='submit']"),this.ui.resetSubmitButtonTime=2e3;var disableReset=this.ui.itemForm.data("disable-reset");this.ui.disableResetSubmitButton=void 0!==disableReset?disableReset:!1;var disableOnSubmit=this.ui.itemForm.data("disable-on-submit");this.ui.disableOnSubmit=void 0!==disableOnSubmit?disableOnSubmit:!0,this.ui.properties=".js-property",this.ui.propertyLabel=".js-property-label",this.ui.propertyInputs=".js-property-value",this.ui.groupedPropertyInputs=".js-grouped-property-value",this.ui.otherPropertiesContainer=".js-property-choices-container";var fadeOnScroll=this.ui.itemForm.data("fade-on-scroll");this.ui.fadeOnScroll=void 0!==fadeOnScroll?fadeOnScroll:!0,this.currentIndex=0,this.ui.itemId=$("#item_id").val(),this.prevBtnEnabled=!0,this.nextBtnEnabled=!0,this.zoomEnabled=!1,configMobileSlider.apply(this),configDesktopSlider.apply(this),smoothSlider(),imgZoom(),imgZoomMobile(),zoomDesktop(),$(document).on("click","#"+this.ui.prevBtn.attr("id"),function(evt){this.prevBtnEnabled&&this.scrollPrevNext("prev"),evt.preventDefault()}),$(document).on("click","#"+this.ui.prevBtn.attr("id"),function(evt){this.nextBtnEnabled&&this.scrollPrevNext("next"),evt.preventDefault()}),this.ui.disableOnSubmit&&this.ui.itemForm.on("submit",function(event){return this.everyIsSelected()?void 0:(event.preventDefault(),this.checkProperties(),!1)}.bind(this));var self=this,propertyLabels=($(this.ui.groupedPropertyInputs),$(this.ui.propertyLabel));propertyLabels.on("touchend",function(e){e.preventDefault(),$(this).prev(self.ui.propertyInputs).trigger("click")}),document.querySelectorAll(".item-show__mobile-slider img")&&document.querySelectorAll(".item-show__mobile-slider img").forEach(function(img){pinchZoom(img)})},itemSlider.prototype.reloadMobileSlider=function(){configMobileSlider.apply(this),configDesktopSlider.apply(this),document.querySelectorAll(".item-show__mobile-slider img")&&document.querySelectorAll(".item-show__mobile-slider img").forEach(function(img){pinchZoom(img)})},itemSlider.prototype.changeImage=function(){this.ui.relvariantcontainer=".js-var-rec";var self=this,item_id=$("#item_id").val(),checkedGroupedProperty=$(".js-grouped-property-value").filter(function(e){return $(this).is(":checked")}),checkedGroupedPropertyValue=_.map(checkedGroupedProperty,function(e){return e.value},[]),data={item_id:item_id,grouped_property_id:checkedGroupedPropertyValue},req=$.ajax({url:Routes[app.localize_route("item_js_change_photo_path")](item_id),data:data,cache:!1,dataType:"json",method:"GET"});req.done(function(data){var variant=data.variant,withStock=(variant.images,data.variant.stock);data.variant.pstock;if(variant.image_slider&&variant.images.length>0){var renderNav=Boolean($("form.js-item-form").data("render-nav")||!1);if(renderNav){var navSelector=self.ui.navContainer;navSelector.fadeOut("slow",function(){navSelector.html(variant.nav),navSelector.fadeIn("slow"),self.reloadSlider()})}$(".js-item-image-container").fadeOut("slow",function(){$(".js-item-image-container").html(variant.image_slider),$(".js-item-image-container").fadeIn("slow",function(){self.reloadSlider()})}),$(".js-item-images-mobile").fadeOut("slow",function(){$(".js-item-images-mobile").html(variant.image_mobile_slider),$(".js-item-images-mobile").fadeIn("slow",function(){self.reloadMobileSlider()}),zoomDesktop()}),$(".js-item-price").text(variant.price);$(".js-item-special-price");variant.with_special_price?($(".js-item-price").addClass("item-show-details__price--old"),$(".js-item-special-price").remove(),$(".js-item-special-price-show").after(variant.special_price_html),$(".item-show-disc-new").show(),$(".item-show-disc-new").text("-"+variant.discount+"%")):($(".js-item-price").removeClass("item-show-details__price--old"),$(".js-item-special-price").remove(),$(".item-show-disc-new").hide()),data.variant.choices_partial&&(void 0!==data.variant.wl&&null!==data.variant.wl&&($(".js-start-item").removeClass(function(index,className){return(className.match(/(^|\s)star_\S+/g)||[]).join(" ")}),$(".js-start-item").addClass("star_"+data.variant.wlid),$(".js-id-form-wish").val(data.variant.wlid),1==data.variant.wl?$(".js-start-item").removeClass("fa-heart-o").addClass("fa-heart"):$(".js-start-item").removeClass("fa-heart").addClass("fa-heart-o")),$(self.ui.otherPropertiesContainer).html(data.variant.choices_partial),$(".js-select2").select2({minimumResultsForSearch:-1,language:{noResults:function(){return I18n.t("select2.agotado")}}}),reload_selects_with_disabled(),$(".js-show-av").data("load-url","/locales/show_av/"+data.variant.var_data[0]+"/"+data.variant.var_data[1]),data.variant.choices_relateditems&&($(self.ui.relvariantcontainer).html(data.variant.choices_relateditems),self.ui.recommendedSwiperSlider=new Swiper($("#js-item-show-recommendations__slider"),{slidesPerView:5,slidesPerGroup:1,pagination:".item-show-recommendations__pagination",prevButton:".item-show-recommendations__slider-prev",nextButton:".item-show-recommendations__slider-next",spaceBetween:10,observer:!1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:1,spaceBetween:7},992:{slidesPerView:3,slidesPerGroup:1,spaceBetween:7}}}))),withStock?(self.ui.submitButton.val(I18n.t("items.show.buy")),self.ui.submitButton.removeAttr("disabled")):(self.ui.submitButton.val(I18n.t("items.show.no_stock")),self.ui.submitButton.attr("disabled","disabled")),setTimeout(function(){new hcSticky(".item-details-box-aside",{stickTo:".item-desktop-container",top:92,responsive:{991:{disable:!0}}}),new hcSticky(".dotnav-left",{stickTo:".item-desktop-container",top:92,left:-200,responsive:{991:{disable:!0}}})},1e3),self.checkProperties()}}).fail(function(jqXHR,textStatus,errorThrown){}.bind(this))},itemSlider.prototype.reload=function(){this.ui={},this.ui.images=$(".js-item-show-images__item"),this.ui.imagesContainer=$(".js-item-show-images"),this.ui.navContainer=$("#js-item-show__nav"),this.ui.navItem=$(".js-item-show__nav-item--pointer"),this.ui.prevBtn=$("#js-item-show__nav-prev"),this.ui.nextBtn=$("#js-item-show__nav-next"),this.ui.zoomBtn=$("#js-item-show__nav-zoom"),this.ui.zoomBtnIcon=$("#js-item-show__nav-zoom-icon"),this.ui.itemDetails=$("#js-item-show-details"),this.ui.recommendedItems=$("#js-item-show-recommendations"),this.ui.recommendedItemsSlider=$("#js-item-show-recommendations__slider"),this.ui.footerBanner=$(".item-show__footer-banner"),this.ui.mobileHeader=$(".js-main-header__mobile"),this.ui.mobileSlider=".js-item-show__mobile-slider",this.ui.priceContainer=$(".js-item-price"),this.ui.itemForm=$("form.js-item-form"),this.ui.submitButton=this.ui.itemForm.find("input[type='submit']"),this.ui.properties=".js-property",this.ui.propertyInputs=".js-property-value",this.ui.groupedPropertyInputs=".js-grouped-property-value",this.ui.otherPropertiesContainer=".js-property-choices-container",this.currentIndex>this.ui.images.length?(this.currentIndex=this.ui.images.length,this.nextBtnEnabled=!1,this.prevBtnEnabled=!0):(0===this.currentIndex?this.prevBtnEnabled=!1:this.prevBtnEnabled=!0,this.nextBtnEnabled=!0),configMobileSlider.apply(this),configDesktopSlider.apply(this),configZoom.apply(this)},itemSlider.prototype.resetFunction=function(){_.delay(function(){"disabled"===this.ui.submitButton.attr("disabled")&&(this.ui.submitButton.val(I18n.t("items.show.buy")),this.ui.submitButton.removeAttr("disabled"))}.bind(this),this.ui.resetSubmitButtonTime||1e3)},itemSlider.prototype.everyIsSelected=function(){return _.every($(this.ui.properties),function(e){return $(e).find('.js-property-value:checked,:selected[value!=""]').length>0})};var configMobileSlider=function(){var self=this;self.ui.sliderMobile=new Swiper(".js-item-show__mobile-slider",{pagination:".swiper-pagination-mobile",prevButton:"#js-item-show__nav-prev",nextButton:"#js-item-show__nav-next",slidesPerView:2,slidesPerGroup:1,paginationClickable:!0,loop:!0,spaceBetween:5,breakpoints:{992:{slidesPerView:1.5}}})},configDesktopSlider=function(){var self=this;self.ui.sliderMobile=new Swiper(".js-item-show__desktop-slider",{pagination:".swiper-pagination-desktop",prevButton:"#js-item-show__nav-prev-desktop",nextButton:"#js-item-show__nav-next-desktop",slidesPerView:2,slidesPerGroup:1,paginationClickable:!0,loop:!0,spaceBetween:10,breakpoints:{992:{slidesPerView:1.5}}})},configHeightDetails=function(){var self=this;$(window).resize(function(){self.refreshHeightDetails()}),$(window).load(function(){self.refreshHeightDetails()})};itemSlider.prototype.refreshHeightDetails=function(){if($(window).width()>991){var heightCalc=$(".js-item-show-images__item").height();$(".js-item-show__details-height").css("height",heightCalc+5),$(".js-modal-item-height").css("height",heightCalc+5)}};var configSlider=function(){var self=this;self.ui.recommendedSwiperSlider=new Swiper($("#js-item-show-recommendations__slider"),{slidesPerView:4.5,slidesPerGroup:1,pagination:".item-show-recommendations__pagination",prevButton:".item-show-recommendations__slider-prev",nextButton:".item-show-recommendations__slider-next",spaceBetween:5,observer:!1,loop:!0,loopAdditionalSlides:100,breakpoints:{768:{slidesPerView:2.3,slidesPerGroup:1,spaceBetween:3.7},992:{slidesPerView:3,slidesPerGroup:1,spaceBetween:3.7}}});self.ui.recommendedSwiperSlider;self.ui.fadeOnScroll&&(self.checkImageViewport(),self.checkShowDetails(),$(window).scroll(function(){self.checkImageViewport(),self.checkShowDetails()})),$(document).on("click",".js-item-show__nav-item--pointer",function(evt){self.scrollToImage($(this))}),$(document).on("click","#"+self.ui.prevBtn.attr("id"),function(evt){self.prevBtnEnabled&&self.scrollPrevNext("prev"),evt.preventDefault()}),$(document).on("click","#"+self.ui.nextBtn.attr("id"),function(evt){self.nextBtnEnabled&&self.scrollPrevNext("next"),evt.preventDefault()}),$(self.ui.otherPropertiesContainer).on("click",self.ui.propertyInputs,_.debounce(self.checkProperties.bind(self),400))},configZoom=function(){var self=this;$(document).on("click","#js-item-show__nav-zoom",function(){self.toggleZoom()}),$(document).on("click",".js-item-show-images__item",function(){self.toggleZoom()})};itemSlider.prototype.checkShowDetails=function(){var mobileView=$(this.ui.mobileHeader).is(":visible"),recommendedItemsInViewport=$(".js-var-rec").length>0&&$(".js-var-rec").inViewport({partially:!0}).length>0,$footer=($(this.ui.footerBanner).length>0&&this.ui.footerBanner.inViewport({partially:!0}).length>0,$("footer"));$footer.length>0&&$footer.inViewport({partially:!0}).length>0;mobileView?this.ui.itemDetails.show():recommendedItemsInViewport?this.ui.navContainer.fadeOut():this.ui.navContainer.fadeIn()},itemSlider.prototype.checkProperties=function(){var nextNotCheckedProperty,notCheckedProperties=$(this.ui.properties).filter(function(idx,property){return 0==$(this).find(":radio:checked").length});if(notCheckedProperties.length>0){nextNotCheckedProperty=notCheckedProperties[1]||notCheckedProperties[0];var message=$(nextNotCheckedProperty).find("[data-display-name]").data("display-name");this.ui.submitButton.val(message),this.ui.submitButton.addClass("submit-error"),this.ui.submitButton.attr("disabled","disabled"),this.disableResetSubmitButton||this.resetFunction()}else this.checkStockAndVariant.bind(this),this.checkStockAndVariant();
},itemSlider.prototype.checkStockAndVariant=function(){var everyChecked=this.everyIsSelected();if(everyChecked){var item_id=$("#item_id").val(),checkedProperties=$(this.ui.propertyInputs).filter(function(e){return $(this).is("select")&&$(this).find(":selected").val().length>0||$(this).is(":checked")}),properties=_.map(checkedProperties,function(e){return e.value},[]),data={item_id:item_id,values:properties},req=$.ajax({url:Routes[app.localize_route("item_js_update_show_path")](item_id),data:data,cache:!1,dataType:"json",method:"GET"});req.done(function(data){var validVariant=data.validVariant;if(validVariant){var withStock=data.stock&&data.stock>0,variant=(data.pstock&&data.stock>0,data.variant);variant.images;this.ui.priceContainer.text(variant.price);$(".js-item-special-price");variant.with_special_price?($(".js-item-price").addClass("item-show-details__price--old"),$(".js-item-special-price").remove(),$(".js-item-special-price-show").after(variant.special_price_html),$(".item-show-disc-new").show(),$(".item-show-disc-new").text("-"+variant.discount+"%")):($(".js-item-price").removeClass("item-show-details__price--old"),$(".js-item-special-price").remove(),$(".item-show-disc-new").hide()),withStock?($(".js-upstock-html").remove(),$(".js-buy-btn").show(),$(".js-stock-news").hide(),this.ui.submitButton.val(I18n.t("items.show.buy")),this.ui.submitButton.removeAttr("disabled")):($(".js-upstock-html").remove(),$(".js-stock-news").append(variant.upstock_html),$(".js-buy-btn").hide(),$(".js-stock-news").show(),this.ui.submitButton.val(I18n.t("items.show.no_stock")),this.ui.submitButton.attr("disabled","disabled"))}else app.flash({message:I18n.t("items.show.variant.invalid"),type:"warning"}),this.ui.submitButton.attr("disabled","disabled")}.bind(this)).fail(function(jqXHR,textStatus,errorThrown){}.bind(this))}},itemSlider.prototype.checkImageViewport=function(){var self=this;self.ui.images.each(function(index){$(this).visible()&&(self.currentIndex=index,self.ui.navItem.removeClass("active"),self.ui.navItem.filter("[data-index="+index+"]").addClass("active"))}),self.currentIndex<=0?(self.prevBtnEnabled=!1,self.ui.prevBtn.addClass("disabled")):(self.prevBtnEnabled=!0,self.ui.prevBtn.removeClass("disabled")),self.currentIndex===self.ui.images.length-1?(self.nextBtnEnabled=!1,self.ui.nextBtn.addClass("disabled")):(self.nextBtnEnabled=!0,self.ui.nextBtn.removeClass("disabled"))},itemSlider.prototype.scrollToImage=function(elem){var navBulletIndex,selectedImage,imgMarginTop;navBulletIndex=$(elem).data("index"),selectedImage=this.ui.images.filter("[data-index="+navBulletIndex+"]"),void 0!==selectedImage&&selectedImage.length>0&&(imgMarginTop=($(window).height()-selectedImage.height())/2,$("html, body").animate({scrollTop:selectedImage.offset().top-imgMarginTop},500))},itemSlider.prototype.scrollPrevNext=function(direction){var scrollImageIndex,selectedImage,imgMarginTop;"next"===direction?(scrollImageIndex=this.currentIndex+1,this.currentIndex++):(scrollImageIndex=this.currentIndex-1,this.currentIndex--),selectedImage=this.ui.images.filter("[data-index="+scrollImageIndex+"]"),void 0!==selectedImage&&selectedImage.length>0&&(imgMarginTop=($(window).height()-selectedImage.height())/2,$("html, body").animate({scrollTop:selectedImage.offset().top-imgMarginTop},500))},itemSlider.prototype.toggleZoom=function(){this.ui.imagesContainer.toggleClass("is-zoom-active"),this.ui.itemDetails.toggleClass("is-zoom-active"),this.zoomEnabled=!this.zoomEnabled,this.ui.zoomBtnIcon.toggleClass("fa-plus fa-minus")},itemSlider.prototype.resetFunction3=function(){_.delay(function(){var no_stock=$(".js-item-form submit").data("no-stock");no_stock||(this.ui.submitButton.val(I18n.t("items.show.buy")),this.ui.submitButton.removeAttr("disabled"),this.ui.submitButton.removeClass("submit-error"))}.bind(this),this.ui.resetSubmitButtonTime||500)},itemSlider.prototype.init=function(){var self=this;self.ui.itemForm.on("submit",function(e){if(self.everyIsSelected()){var succeed=!1;return $.ajax({url:Routes.check_stock_item_es_ar_path({id:self.ui.itemId}),dataType:"json",type:"GET",data:self.ui.itemForm.serialize(),success:function(data){succeed=data.validVariant},error:function(data){succeed=!1},async:!1}),succeed||(e.preventDefault(),self.ui.submitButton.addClass("submit-error"),self.ui.submitButton.attr("disabled","disabled"),self.ui.submitButton.val(I18n.t("items.show.no_stock")),self.ui.disableResetSubmitButton||self.resetFunction3()),succeed}return e.preventDefault(),!1}),$(self.ui.itemDetails).on("click",self.ui.propertyInputs,_.debounce(self.checkProperties.bind(self),400)),$(self.ui.itemDetails).on("change",self.ui.propertyInputs+", "+self.ui.quantity,_.debounce(self.checkProperties.bind(self),400))},window.itemSlider=new itemSlider,$(document).ready(function(){function formatExample(option){$(option.element);return option.element?" <span class='select-color-box' style='display: inline; background-color:"+option.element.dataset.color+"'>&nbsp;&nbsp;</span> "+option.text:void 0}$("select.js-select2-colored").select2({minimumResultsForSearch:-1,templateResult:formatExample,templateSelection:formatExample,escapeMarkup:function(m){return m}})}),$(document).ready(function(){var no_stock=$(".js-item-form submit").data("no-stock");void 0===no_stock||no_stock||window.itemSlider.ui.submitButton.removeAttr("disabled"),imgZoom(),imgZoomMobile(),window.itemSlider.init()});var imgZoom=function(){$(".js-zoom").click(function(){$("#showImg").empty();var image=$(this).attr("src");$("#showImg").append("<img class='img-responsive' src='"+image+"' />")})},imgZoomMobile=function(){$(".js-zoom-xs").click(function(){$("#showImgMobile").empty();var image=$(".swiper-slide-active").find("img").attr("src");$("#showImgMobile").append("<img class='img-responsive' src='"+image+"' />")})};$(document).ready(function(){if(reload_selects_with_disabled(),$(".js-property-value").is(":checked")){var colorID=$(".js-property-value:checked:enabled").val(),target=$("span#"+colorID);$("#colorItems").html(target.data("description"))}$(".js-property-value").on("change",function(e){var colorID=$(this).val(),target=$("span#"+colorID);$("#colorItems").html(target.data("description")),e.preventDefault()})});var smoothSlider=function(){$("body").scrollspy({target:"#mainnav",offset:500}),$('a[href*="#item-image-"]').click(function(event){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]"),target.length&&(event.preventDefault(),$("html, body").animate({scrollTop:target.offset().top},1e3,function(){var $target=$(target);return $target.focus(),$target.is(":focus")?!1:($target.attr("tabindex","-1"),void $target.focus())}))}})},zoomDesktop=function(){$(".img-zoom-ficha").click(function(){$(this).toggleClass("normal-zoom zoom-in")}),$(".img-zoom-ficha").on("mousemove",function(event){var bbox=event.target.getBoundingClientRect(),mouseX=event.clientX-bbox.left,mouseY=event.clientY-bbox.top,xPercent=mouseX/bbox.width*100,yPercent=mouseY/bbox.height*100;$(this).css("transform-origin",xPercent+"% "+yPercent+"%")}),$(".img-zoom-ficha").on("mouseleave",function(){$(this).addClass("normal-zoom"),$(this).removeClass("zoom-in")})};new Swiper($("#js-item-show-visited__slider"),{slidesPerView:8,slidesPerGroup:1,pagination:".item-show-visited__pagination",prevButton:".item-show-visited__slider-prev",nextButton:".item-show-visited__slider-next",spaceBetween:6,observer:!1,loop:!1,breakpoints:{768:{slidesPerView:2.12},992:{slidesPerView:3.2}}});imgZoom(),imgZoomMobile(),smoothSlider(),zoomDesktop()}(),$(document).ready(function(){reload_selects_with_disabled()});